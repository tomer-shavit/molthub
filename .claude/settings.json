{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "model": "claude-opus-4-6",
  "permissions": {
    "deny": [
      "Read(./.env)",
      "Read(./.env.*)",
      "Read(./secrets/**)"
    ]
  },
  "sandbox": {
    "enabled": true,
    "autoAllowBashIfSandboxed": true,
    "network": {
      "allowedDomains": [
        "github.com",
        "*.github.com",
        "*.npmjs.org",
        "registry.npmjs.org",
        "hub.docker.com",
        "*.amazonaws.com",
        "*.aws.amazon.com"
      ]
    }
  },
  "hooks": {
    "SessionStart": [
      {
        "matcher": "compact",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'CONTEXT RESTORED: Clawster project. pnpm monorepo (NestJS API port 4000, Next.js Web port 3000). Never run pnpm dev. Run pnpm --filter <pkg> build after package changes. Use Computer Use for browser verification. Check .claude/docs/ for domain knowledge.'"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Review ONLY the code just written/edited. Check for: (1) SOLID violations: does a class/function have more than one responsibility? Are dependencies hardcoded instead of injected? Are interfaces too broad? (2) Dead code: unused imports, unreachable branches, commented-out code, unused variables/functions. (3) Unnecessary complexity: over-abstraction, premature generalization. If violations found, list them with file path and line. If clean, say PASS.",
            "statusMessage": "Checking SOLID principles and dead code..."
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "git diff --name-only 2>/dev/null | grep -E '\\.(ts|tsx)$' | head -5 | while read f; do if grep -l 'console\\.log' \"$f\" 2>/dev/null; then echo \"WARNING: console.log found in $f\" >&2; fi; done; exit 0"
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "cd /home/tomer_shavit/clawster && npx knip --no-exit-code --reporter compact 2>&1 | head -80 || echo 'knip not available - run: pnpm add -D knip'"
          }
        ]
      }
    ]
  }
}
